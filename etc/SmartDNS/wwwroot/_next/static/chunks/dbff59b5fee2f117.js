(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32528,e=>{"use strict";var t=e.i(54624);e.s(["createSvgIcon",()=>t.default])},31814,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(614),s=e.i(80926),o=e.i(33938),l=e.i(13607),i=e.i(69120),n=e.i(42669),c=e.i(78365),u=e.i(6376),d=e.i(37563),g=e.i(98759),h=e.i(9578);e.i(21845);var m=e.i(22831),S=e.i(73869),b=e.i(76421),f=e.i(57305),y=e.i(50967);function p(){let{t:e}=(0,m.useTranslation)(),[r,s]=(0,a.useState)([]),[l,y]=(0,a.useState)(!1),[p,v]=(0,a.useState)(!1),C="upstream-servers-table-column-visibility",z="upstream-servers-table-column-sizing",T=localStorage.getItem(C),x=localStorage.getItem(z),_={},j={};try{T&&(_=JSON.parse(T))}catch{localStorage.removeItem(C),_={}}try{x&&(j=JSON.parse(x))}catch{localStorage.removeItem(z),j={}}let K=_||{},[w,R]=a.useState(K),[N,k]=a.useState(j),M=(0,a.useMemo)(()=>[{accessorKey:"host",header:e("Host"),size:250,enableSorting:!1},{accessorKey:"ip",header:e("IP"),enableSorting:!1,size:330},{accessorKey:"port",header:e("Port"),size:80,enableSorting:!1},{accessorKey:"server_type",header:e("Type"),size:100},{accessorKey:"security",header:e("Security"),size:148},{accessorKey:"status",header:e("Status"),size:110},{accessorKey:"query_success_rate",header:e("Success Rate"),enableSorting:!0,size:160,Cell:({cell:e})=>{let a=e.getValue();return(0,t.jsxs)("span",{children:[a," %"]})}},{accessorKey:"avg_time",header:e("Avg Time"),enableSorting:!0,size:140,Cell:({cell:e})=>{let a=e.getValue();return a<0?(0,t.jsx)("span",{children:"N/A"}):(0,t.jsxs)("span",{children:[a," ms"]})}},{accessorKey:"total_query_count",header:e("Total Query Count"),enableSorting:!0,size:200},{accessorKey:"total_query_success",header:e("Total Success Number"),enableSorting:!0,size:220}],[e]),{checkSessionError:A}=(0,h.useUser)(),[E,I]=(0,a.useState)(""),[P,O]=(0,a.useState)(S.MRT_Localization_EN),B=a.useCallback(async()=>{v(!0);let t=await g.smartdnsServer.GetUpstreamServers();if(t.error){await A?.(t.error),I(g.smartdnsServer.getErrorMessage(t.error)),y(!0),v(!1);return}if(null===t.data||void 0===t.data){y(!0),I(e("No data returned.")),v(!1);return}s(t.data.map(t=>({...t,security:e(t.security),status:e(t.status)}))),y(!1),v(!1)},[A,e]);a.useEffect(()=>{B().catch(e=>{})},[B]),a.useEffect(()=>{null!==f.default.language&&void 0!==f.default.language&&("zh-CN"===f.default.language?O(b.MRT_Localization_ZH_HANS):O(S.MRT_Localization_EN))},[]);let{colorScheme:F}=(0,d.useColorScheme)(),L=a.useMemo(()=>(0,u.createTheme)({palette:{mode:"dark"===F?"dark":"light"}}),[F]).palette.background.paper,U=(0,o.useMaterialReactTable)({columns:M,data:r,localization:P,enableColumnResizing:!0,enableColumnOrdering:!1,enableColumnActions:!1,enableColumnFilters:!1,enableSorting:!0,enableClickToCopy:window.isSecureContext,enableGlobalFilter:!0,enableColumnFilterModes:!1,enableColumnPinning:!0,enableColumnDragging:!1,enableKeyboardShortcuts:!1,enablePagination:!1,enableGlobalFilterRankedResults:!1,muiToolbarAlertBannerProps:E.length>0?{color:"error",children:E}:void 0,renderTopToolbarCustomActions:()=>(0,t.jsx)(n.Tooltip,{arrow:!0,title:e("Refresh Data"),children:(0,t.jsx)(i.IconButton,{onClick:async()=>B(),children:(0,t.jsx)(c.default,{})})}),onColumnVisibilityChange:e=>{let t="function"==typeof e?e(w):e;R(t),localStorage.setItem(C,JSON.stringify(t))},onColumnSizingChange:e=>{let t="function"==typeof e?e(N):e;k(t),localStorage.setItem(z,JSON.stringify(t))},initialState:{showGlobalFilter:!0,columnVisibility:w,columnSizing:N},state:{showAlertBanner:l,showProgressBars:p,showSkeletons:p,columnVisibility:w,columnSizing:N},mrtTheme:e=>({baseBackgroundColor:L})});return(0,t.jsx)(o.MaterialReactTable,{table:U})}function v(){let[e,r]=a.useState({vertical:"top",horizontal:"left"});return a.useEffect(()=>{let e=window.matchMedia("(max-width: 600px)"),t=e=>{e.matches?r({vertical:"top",horizontal:"left"}):r({vertical:"bottom",horizontal:"left"})};return e.matches?r({vertical:"top",horizontal:"left"}):r({vertical:"bottom",horizontal:"left"}),e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}},[r]),(0,t.jsx)(y.SnackbarProvider,{anchorOrigin:e,maxSnack:5,autoHideDuration:6e3,children:(0,t.jsx)(l.Card,{children:(0,t.jsx)(p,{})})})}function C(){let{t:e}=(0,m.useTranslation)();return a.useEffect(()=>{document.title=`${e("Upstream Servers")} | ${e("Dashboard")} | ${s.config.site.name}`},[e]),(0,t.jsx)(r.default,{spacing:2,children:(0,t.jsx)(v,{})})}e.s(["default",()=>C],31814)}]);